<!DOCTYPE html><!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--><!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]--><!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]--><!--[if gt IE 8]><!--><html class=no-js><!--<![endif]--><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>Plans for automating central heating control with a Raspberry Pi</title><!-- facebook open graph tags --><meta property=og:type content=article><meta property=og:site_name content="Ryan Brooks' blog"><meta property=og:url content="https://www.ryanbrooks.co.uk/posts/2013-11-20-automating-central-heating-control-with-a-raspberry-pi/"><meta property=og:title content="Plans for automating central heating control with a Raspberry Pi"><meta property=og:description content=""><!-- twitter card tags additive with the og: tags --><meta name=twitter:card content=summary><meta name=twitter:site content=@spikeheap><meta name=twitter:url value="https://www.ryanbrooks.co.uk/posts/2013-11-20-automating-central-heating-control-with-a-raspberry-pi/"><meta name=twitter:title value="Plans for automating central heating control with a Raspberry Pi"><meta name=twitter:description value=""><meta name=twitter:label1 value="Reading time"><meta name=twitter:data1 value="ðŸ•’ 5 minutes"><meta name=viewport content="width=device-width, initial-scale=1"><link rel=alternate type=application/rss+xml title="Ryan Brooks' blog" href=https://www.ryanbrooks.co.uk/feed.xml><link rel=stylesheet href=/css/style.59c4.css><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='//www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-43110335-1');ga('send','pageview');</script><meta name=google-site-verification content=Ie2d0Oy5dhnMbWcw7qg7PIeq3Wiv9X7GoyyL9pz39Eo></head><body><!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]--><nav class="navbar navbar-default navbar-top"><div class=container><!-- Brand and toggle get grouped for better mobile display --><div class=navbar-header><button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=#bs-example-navbar-collapse-1><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href="/">Ryan Brooks</a></div><!-- Collect the nav links, forms, and other content for toggling --><div class="collapse navbar-collapse" id=bs-example-navbar-collapse-1><ul class="nav navbar-nav"><li><a href=/archives.html>Blog archive</a></li></ul><ul class="nav navbar-nav navbar-right"><li><a class="nav-fa-link target=" _blank="" href=https://github.com/spikeheap><i class="fa fa-2x fa-github-square"></i></a></li><li><a class="nav-fa-link target=" _blank="" href=https://twitter.com/spikeheap><i class="fa fa-2x fa-twitter-square"></i></a></li><li><a class="nav-fa-link target=" _blank="" href=http://uk.linkedin.com/in/ryanpbrooks><i class="fa fa-2x fa-linkedin-square"></i></a></li><li><a class="nav-fa-link target=" _blank="" href=mailto:ryanbrooksis+info@gmail.com><i class="fa fa-2x fa-envelope-square"></i></a></li></ul></div><!-- /.navbar-collapse --></div></nav><div class=container><div class=row><div class=col-sm-9><h1 class=page-title>Plans for automating central heating control with a Raspberry Pi</h1><span class=text-muted>20 Nov 2013</span>, <span class="reading-time text-muted">4 minute read</span><p></p><p>Moving into a stone-built cottage with single glazing and bottled gas central heating has been a (good) learning experience. Fortunately we have a combi-boiler so have on-demand hot water, but the central heating timer cuts power to the boiler so no heating = no hot water. Also, the thermostat is by the front door, so provides a wildly different temperature from the rooms! My project is to hack into the thermostat and replace it with a raspberry pi providing timed heat as well as using information from a wireless thermometer located nearby, and then to add some intelligence to try to save money and the environment.</p><!-- more --><p>I was inspired to build this after David Hunnisett gave a presentation at a Bangor software developers lightning lunch. His project was to hack his wireless thermostat and use a BeagleBone to figure out whether anyone was in the house (or returning home) based on their personal devices network presence. Pretty cool stuff. This is a little more basic, and Iâ€™ll be happy if we just get the following:</p><ul><li>Web-based switching</li><li>7-day programs with multiple heating times per day</li><li>Switching tolerance (my previous thermostat would sit there clicking while the temperature hovered around the switching point)</li><li>Minimum temperature override using the existing thermostat (so the pipes donâ€™t freeze if the Pi dies)</li></ul><p>Of course once youâ€™ve got control of the heating system and a connection to the network you can think about automating a raft of other things, for example:</p><ul><li>Grab your work schedule from Google Calendar and automatically switch the heating off when youâ€™re at work (and on when youâ€™re heading home)</li><li>Provide an interface to turn the heating on/off from anywhere in the world with an internet connection</li><li>Record how long the heating has been on, and estimate gas usage. We only use gas for heating, obviously itâ€™s harder to do it youâ€™re cooking with gas too :)</li></ul><p>A couple of friends founded the amazing <a href="http://openenergymonitor.org/emon/">OpenEnergyMonitor project</a> in North Wales, and Glynâ€™s enthusiasm for this sort of thing is infectious. Once Iâ€™ve got a basic system up and running the next logical step is to collect usage data for the other parts of the house, and tie it all together with things like outside temperature and humidity. Thereâ€™s (almost) nothing I love more than stats, so this project will be like Christmas!</p><h1 id=why-am-i-doing-this-why-not-just-buy-a-nest>Why am I doing this? Why not just buy a Nest?</h1><p>Okay, Iâ€™m sure this project will end up being like my first foray into building a MythTV media server 8 years ago and will take more time and money than buying an off-the-shelf solution, but thatâ€™s not my motivation. My primary reason for doing this is that thereâ€™s something really cool (pun intended) about interacting with the real-world with software, and the (hopefully) satisfaction of hearing the heating click to life because of a piece of code Iâ€™ve written is pretty inspiring.</p><p>Secondly, information is king. I want to be able to get at everything later and see what my house has been doing. Most proprietary systems lock you in and only let you do what they want you to do.</p><p>Finally, if I can complete this and package it into something thatâ€™s useful enough for someone else to hack on, all the better. The Pi-powered thermostat interface problem seems to have been solved many times, but the software to sit on top of it seems less readily available.</p><h1 id=phase-1-hacking-into-the-existing-system>Phase 1: hacking into the existing system</h1><p>My background is in software engineering and networking, so because I see the electronics and physical side of this as the biggest challenge Iâ€™m tackling that first. Fortunately thereâ€™s a wealth of information about this exact use-case on the Internet (if only I had internet at home!).</p><p>The first thing I did was to open up the thermostat to find out what terminals were available. Mine has 4, including 1 earth and 1 live. Iâ€™ll kno a bit more once my multimeter comes back from storage in a week or so.</p><p>Thanks to <a href=http://twitter.com/glynhudson>@GlynHudson</a> I cut out needing to solder my own relay board for the Raspberry Pi and ordered the following to go with my existing Pi, SD card and power adaptor:</p><ul><li>Slice of Relay expansion board for the Pi from Ciseco</li><li>WiPi wireless USB dongle, so it can talk to the house network</li><li>Real Time Clock module with combined thermometer, to allow the Pi to act as a thermostat and remain on-track even when the network is down</li></ul><p>My original plan had been to use a latching (bistable) relay so the Pi didnâ€™t need to apply current constantly, but decided a fail-safe option is better, and if the Pi dies so will the heating, rather than using up all my gas!</p><p>Once those components turn up (and I get some time), Iâ€™ll let you know how itâ€™s going.</p><!--
* The existing thermostat
* Switching 220V with a Pi (and starting with a prototype)
--><hr><div class=discussion><h1>Discuss!</h1><p>Was this post useful? Why not help others find it by sharing on <a href="https://twitter.com/intent/user?screen_name=spikeheap" target=_blank><i class="fa fa-twitter"></i> twitter</a>. While you're there, get in touch and let me know what you think!</p></div><div class=post-nav><a class="hidden-xs btn btn-sm btn-default pull-left half-width-max text-overflow" href="/posts/2013-10-02-puppet-talk/"><i class="fa fa-arrow-circle-left"></i> Puppet talk</a> <a class="visible-xs-block btn btn-default btn-block text-overflow" href="/posts/2013-10-02-puppet-talk/"><i class="fa fa-fw fa-arrow-circle-left"></i> Puppet talk</a> <a class="btn btn-sm btn-default hidden-xs pull-right half-width-max text-overflow" href="/posts/2013-11-21-setting-up-grails-code-quality-tools-with-local-sonar/">Setting up Grails code quality tools with local Sonar <i class="fa fa-arrow-circle-right"></i></a> <a class="visible-xs-block btn btn-default btn-block text-overflow" href="/posts/2013-11-21-setting-up-grails-code-quality-tools-with-local-sonar/"><i class="fa fa-fw fa-arrow-circle-right"></i> Setting up Grails code quality tools with local Sonar</a> <span class=clearfix></span></div></div><div class="col-sm-3 border-left"><div class=bio><img src=/images/profile-400px.7d5e.jpg><h3>Hi, I'm Ryan</h3><p>I care about code, building great teams and the community. I run <a href=https://www.slatehorse.com>Slate Horse</a> but I'm still a full-stack developer. Previously co-organiser of <a href="http://jsoxford.com/">JSOxford</a> and <a href="http://oxrug.org/">OxRUG</a>.</p><hr><h4>Get in touch</h4><div class=contact-icons><a target=_blank href=https://twitter.com/spikeheap><i class="fa fa-2x fa-twitter-square"></i></a> <a target=_blank href=https://github.com/spikeheap><i class="fa fa-2x fa-github-square"></i></a> <a target=_blank href=http://uk.linkedin.com/in/ryanpbrooks><i class="fa fa-2x fa-linkedin-square"></i></a> <a target=_blank href=mailto:ryanbrooksis+info@gmail.com><i class="fa fa-2x fa-envelope-square"></i></a></div></div></div></div></div><footer class="container-fluid footer--bottom"><div class=container><small>&copy; Ryan Brooks. The content of this page is licensed under the Creative Commons Attribution 3.0 License.</small></div></footer><script src=/bower_components/jquery/dist/jquery.min.js></script><script src=/bower_components/bootstrap-sass/assets/javascripts/bootstrap.js></script></body></html>
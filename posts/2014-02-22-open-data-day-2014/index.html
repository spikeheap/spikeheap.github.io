<!DOCTYPE html><!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--><!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]--><!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]--><!--[if gt IE 8]><!--><html class=no-js><!--<![endif]--><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title></title><meta name=description content=""><meta name=viewport content="width=device-width, initial-scale=1"><link rel=alternate type=application/rss+xml title="Ryan Brooks' blog" href=http://ryanbrooks.co.uk/feed.xml><link rel=stylesheet href=/css/style.8722.css><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='//www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-43110335-1');ga('send','pageview');</script><meta name=google-site-verification content=Ie2d0Oy5dhnMbWcw7qg7PIeq3Wiv9X7GoyyL9pz39Eo></head><body><!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]--><nav class="navbar navbar-default navbar-top"><div class=container><!-- Brand and toggle get grouped for better mobile display --><div class=navbar-header><button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=#bs-example-navbar-collapse-1><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href="/">Ryan Brooks</a></div><!-- Collect the nav links, forms, and other content for toggling --><div class="collapse navbar-collapse" id=bs-example-navbar-collapse-1><ul class="nav navbar-nav"><li><a href=/archives.html>Blog archive</a></li></ul><ul class="nav navbar-nav navbar-right"><li><a target=_blank href=https://github.com/spikeheap><i class="fa fa-2x fa-github-square"></i></a></li><li><a target=_blank href=https://twitter.com/spikeheap><i class="fa fa-2x fa-twitter-square"></i></a></li><li><a target=_blank href=http://uk.linkedin.com/in/ryanpbrooks><i class="fa fa-2x fa-linkedin-square"></i></a></li><li><a target=_blank href=mailto:ryanbrooksis+info@gmail.com><i class="fa fa-2x fa-envelope-square"></i></a></li></ul></div><!-- /.navbar-collapse --></div></nav><!-- <div id="header" class="jumbotron">
	<div class="container">
		<h1><a href="/">Ryan Brooks' blog</a></h1>
	</div>
</div> --><div class=container><div class=row><div class=col-xs-12><a href="/posts/2014-02-06-geb-doubleclick/"><i class="fa fa-arrow-circle-left"></i> prev</a> | <a href="/posts/2014-02-24-cycle-safely-please-oxford/">next <i class="fa fa-arrow-circle-right"></i></a><h1>Open Data Day 2014 <small>22 Feb 2014</small></h1><p></p><p><a href="http://opendataday.org/">The International Open Data Day</a> is almost over (here at least), and I was lucky enough to join the <a href=http://www.oerc.ox.ac.uk/events/open-data-hack-day>Oxford Hackathon</a>. This was my first full-day hackathon, and although we didn’t achieve everything we set out for it was a great day with great people. Plus I learned a lot and got to play with some interesting technologies.</p><p>You should definitely check out the <a href="http://hangler.net/2014/02/22/oxford-open-data-day/">international broadband price comparison visualisation</a>, based on <a href=http://policybythenumbers.blogspot.co.uk/2013/05/international-broadband-pricing-study.html>Google’s international broadband pricing study</a>. Well done guys!</p><!-- more --><p>The day was run at the Oxford e-Research Centre, and after a leisurely start we went around the table and introduced ourselves. There was a good turnout, although I quickly realised I was the only JVM programmer. A few interesting options emerged, and I joined a group with the aim of graphing tweet counts against water levels for Oxford.</p><p>For more information, there’s a <a href=http://wiki.opendataday.org/Oxford2014>page on the opendataday.org wiki</a> about the Oxford event.</p><h3 id=flood-level-data>Flood level data</h3><p>The flood topic was put forward with a <a href="http://blog.okfn.org/2014/02/13/river-level-data-must-be-open/">blog post</a> requesting more open data on flooding, water levels, and precipitation.</p><p>Our first find was the <a href="http://flooddata.alphagov.co.uk/">Gov.UK Flood Data project</a> and their <a href=https://github.com/alphagov/flooddata>Github project</a>. This gave us some tab-separated flood data to play with, so off we went.</p><h3 id=mongo-and-groovy-munging>Mongo and Groovy munging</h3><p>We weren’t really sure what we wanted to do with the data past our initial graph, so we set about munging it into a <a href="http://www.mongodb.org/">MongoDB</a> store. Often the problem at events is there’s no common space to host things. Fortunately now there are loads of hosted service offerings, and we used one of MongoLab’s free hosted sandbox plans. Win!</p><p>I set about writing a tab separated file MongoDB importer in Groovy while Artur and <a href=https://twitter.com/iiSeymour>Chris</a> built a Python Flask frontend and a downloader for the TSV files. Groovy performed suitably well (even under my fingers) to process and upload the data quickly, although there wasn’t an (obvious) TSV parser (in hindsight a decent <a href="http://opencsv.sourceforge.net/">CSV parser</a> would do the job quite nicely). Our data was pretty clean, but YMMV.</p><p>Pushing to Mongo turned out to be trivial with <a href=https://github.com/poiati/gmongo>gmongo</a>:</p><script src=https://gist.github.com/spikeheap/9162189.js></script><p>Feeling rushed, I pushed into producing code and neglected to add any <a href="http://docs.spockframework.org/en/latest/">spock</a> tests after the first 30 minutes. Bad Ryan!</p><p>Recently I’ve found <a href="http://www.gradle.org/">Gradle</a> to be great for building, testing, deploying (to <a href="https://bintray.com/">https://bintray.com/</a>) and managing dependencies of Groovy projects. The only thing I couldn’t get it to do is run a Groovy script as part of <code>gradle run</code>.</p><h3 id=grails-json-endpoint>Grails JSON endpoint</h3><p>Chris was building a frontend using Flask so we could use <a href="http://d3js.org/">d3</a> to visualise the data. I was interested to see how quickly I could flesh out a basic Grails app and investigate the MongoDB support. Removing the Hibernate plugin and adding Mongo for GORM was trivial, and a couple of extra <code>mapping</code> entries sorted out the objects.</p><p>Using the new(ish) <code>@Resource</code> annotation on the domain object was great to get a simple REST endpoint to list the data (or at least the first 10 entries), but I couldn’t see a way to easily add filtering on attributes, so a <code>RestfulController</code> was added. Either way, it was a great win for Grails: simple JSON endpoints in 15 minutes.</p><p>The difficulty came when we wanted to filter the data. I’ve not used MongoDB before, but adding an index to a value returned instantly without speeding up the lookup, so I’m assuming we did something wrong.</p><h3 id=mongodb-performance-for-the-novice>MongoDB performance for the novice</h3><p>Using gmongo to do an import of a reasonable amount of TSV data took ages. I’d love to hear what the obvious mistake in <a href=https://github.com/OpenDataHackDayOxford/flood-data-search/blob/master/groovy-waterlevel-parser/src/main/groovy/opendatahack/flooddata/FloodDataParser.groovy>my code</a> is. I guess this could be expected because of the internet connection, but it took nearly an hour to create a ~20Mb MongoDb container.</p><p>Where I hit real problems was using GORM. We wanted to filter the objects by their <code>region</code> attribute, so I just did a simple <code>WaterLevelReading.findAllByRegion(params.region)</code>. The result was a ~5 minute request, a little too slow. I’m sure there’s something simple I missed, but it was a surprising problem to hit.</p><h3 id=running-out-of-time>Running out of time</h3><p>Unfortunately we reached the end of the day before we could get onto the “cool” visualisation bits, but we regrouped and found that mining Twitter is actually quite difficult. Their API only returns a subset of the tweets available, and for the flood-related searches only ~30 tweets could be found, despite it being a hot topic a month ago.</p><p>Even though we didn’t complete our project, it was a great day and a chance to work with interesting people. I’ve come away with a load more ideas, things to learn, and can’t wait for the next event. Thanks to the organisers Iain and Jenny for helping the day go smoothly and making us all feel welcome.</p><p>You can find the (very rough) code on <a href=https://github.com/OpenDataHackDayOxford/flood-data-search>Github</a> and the hackathon wiki page <a href=http://wiki.opendataday.org/Oxford2014>here</a>.</p><div><a class=twitter-share-button href=https://twitter.com/share data-url="http://ryanbrooks.co.uk/posts/2014-02-22-open-data-day-2014/" data-via=spikeheap>Tweet</a> <a class=twitter-follow-button href=https://twitter.com/spikeheap data-show-count=false data-lang=en>Follow @spikeheap</a> <!-- set data-annotation to 'bubble' for count --><div class=g-plus data-action=share data-annotation=none></div></div><a href="/posts/2014-02-06-geb-doubleclick/"><i class="fa fa-arrow-circle-left"></i> prev</a> | <a href="/posts/2014-02-24-cycle-safely-please-oxford/">next <i class="fa fa-arrow-circle-right"></i></a><div id=disqus_thread></div><!-- Disqus comments --><script type=text/javascript>/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'ryanbrooks'; // required: replace example with your forum shortname
    var disqus_identifier = 'posts-2014-02-22-open-data-day-2014';
    var disqus_title = 'Open Data Day 2014';
    var disqus_url = 'http://ryanbrooks.co.uk/posts/2014-02-22-open-data-day-2014/';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href="/posts/2014-02-06-geb-doubleclick/"><i class="fa fa-arrow-circle-left"></i> prev</a> | <a href="/posts/2014-02-24-cycle-safely-please-oxford/">next <i class="fa fa-arrow-circle-right"></i></a></div></div></div><footer id=footer class=container-fluid><div class=footer--top><div class=row><div class="col-xs-5 col-sm-4 col-md-3 col-lg-2"><h1>Get in touch</h1><div class=contact-icons><a target=_blank href=https://github.com/spikeheap><i class="fa fa-2x fa-github-square"></i></a> <a target=_blank href=https://twitter.com/spikeheap><i class="fa fa-2x fa-twitter-square"></i></a> <a target=_blank href=http://uk.linkedin.com/in/ryanpbrooks><i class="fa fa-2x fa-linkedin-square"></i></a> <a target=_blank href=mailto:ryanbrooksis+info@gmail.com><i class="fa fa-2x fa-envelope-square"></i></a></div></div><div class="col-xs-7 col-sm-6 col-md-5 col-lg-4"><h1>Hi, I'm Ryan</h1><p>I care about code, process and the community. I'm a freelance CTO and full-stack developer, and co-organiser of <a href="http://jsoxford.com/">JSOxford</a>.</p></div></div></div></footer><!-- <footer class="container-fluid footer--middle">
	<div class="container">
		<div class="row">
			<div class="col-xs-12">
				<h1>Have a look around
    				<span>Home</span>
    				<span>Blog</span>
    				<span>More about me</span>
    				</h1>
			</div>
		</div>
	</div>		
</footer> --><footer class="container-fluid footer--bottom"><div class=container><small>&copy; Ryan Brooks. The content of this page is licensed under the Creative Commons Attribution 3.0 License, and code samples are licensed under the Apache 2.</small></div></footer><script src=/bower_components/jquery/dist/jquery.min.js></script><script src=/bower_components/bootstrap-sass/assets/javascripts/bootstrap.js></script><!-- Twitter bits --><script>window.twttr=(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);t._e=[];t.ready=function(f){t._e.push(f);};return t;}(document,"script","twitter-wjs"));</script><!-- Google plus --><script src=https://apis.google.com/js/platform.js async defer>{lang: 'en-GB'}</script></body></html>
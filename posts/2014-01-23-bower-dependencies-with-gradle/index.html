<!DOCTYPE html><!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--><!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]--><!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]--><!--[if gt IE 8]><!--><html class=no-js><!--<![endif]--><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>Bower dependencies with Gradle</title><!-- facebook open graph tags --><meta property=og:type content=article><meta property=og:site_name content="Ryan Brooks' blog"><meta property=og:url content="https://www.ryanbrooks.co.uk/posts/2014-01-23-bower-dependencies-with-gradle/"><meta property=og:title content="Bower dependencies with Gradle"><meta property=og:description content=""><!-- twitter card tags additive with the og: tags --><meta name=twitter:card content=summary><meta name=twitter:site content=@spikeheap><meta name=twitter:url value="https://www.ryanbrooks.co.uk/posts/2014-01-23-bower-dependencies-with-gradle/"><meta name=twitter:title value="Bower dependencies with Gradle"><meta name=twitter:description value=""><meta name=twitter:label1 value="Reading time"><meta name=twitter:data1 value="üïí 3 minutes"><meta name=viewport content="width=device-width, initial-scale=1"><link rel=alternate type=application/rss+xml title="Ryan Brooks' blog" href=https://www.ryanbrooks.co.uk/feed.xml><link rel=stylesheet href=/css/style.d41d.css><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='//www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-43110335-1');ga('send','pageview');</script><meta name=google-site-verification content=Ie2d0Oy5dhnMbWcw7qg7PIeq3Wiv9X7GoyyL9pz39Eo></head><body><!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]--><nav class="navbar navbar-default navbar-top"><div class=container><!-- Brand and toggle get grouped for better mobile display --><div class=navbar-header><button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=#bs-example-navbar-collapse-1><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href="/">Ryan Brooks</a></div><!-- Collect the nav links, forms, and other content for toggling --><div class="collapse navbar-collapse" id=bs-example-navbar-collapse-1><ul class="nav navbar-nav"><li><a href="/archives/">Blog archive</a></li></ul><ul class="nav navbar-nav navbar-right"><li><a class="nav-fa-link target=" _blank="" href=https://github.com/spikeheap><i class="fa fa-2x fa-github-square"></i></a></li><li><a class="nav-fa-link target=" _blank="" href=https://twitter.com/spikeheap><i class="fa fa-2x fa-twitter-square"></i></a></li><li><a class="nav-fa-link target=" _blank="" href=http://uk.linkedin.com/in/ryanpbrooks><i class="fa fa-2x fa-linkedin-square"></i></a></li><li><a class="nav-fa-link target=" _blank="" href=mailto:ryanbrooksis+info@gmail.com><i class="fa fa-2x fa-envelope-square"></i></a></li></ul></div><!-- /.navbar-collapse --></div></nav><div class=container><div class=row><div class=col-sm-9><h1 class=page-title>Bower dependencies with Gradle</h1><span class=text-muted>23 Jan 2014</span>, <span class="reading-time text-muted">2 minute read</span><p></p><p>We all know <a href=http://www.joelonsoftware.com/articles/fog0000000043.html>it‚Äôs important to be able to build your code in one step</a>, but when I came to build a project I‚Äôm working on at home I found it was actually a bit of a faff. Gradle came to the rescue, and in 15 minutes we made steps towards having a 1-step setup and build.</p><!-- more --><p>The project in question is built in Grails but uses Bower to ensure we have the right versions of AngularJS, Bootstrap, etc. Once your development machine is setup it‚Äôs as ‚Äúeasy‚Äù as running <code>bower install</code> whenever the dependencies change, and otherwise using the standard <code>grails</code> commands.</p><p>When you come to a fresh machine there are a few more steps before you can get up and running:</p><ol><li>Have I got Grails installed?</li><li>Have I got NodeJS installed?</li><li>Have I installed Bower using NPM?</li><li>Have I run Bower to install the dependencies?</li></ol><p>This is already too much hassle! Grails makes life easier by generating a <a href=http://mrhaki.blogspot.co.uk/2013/03/grails-goodness-using-wrapper-for.html>Grails wrapper</a>, <code>grailsw</code>, so we don‚Äôt need to check that Grails is installed. So far, so good!</p><p>NodeJS is a requirement for development, so I made the assumption that any developer machine would have it present. From there I wanted to use NPM to install Bower and then run Bower to grab the dependencies. There were plenty of options but I‚Äôm keen to learn a bit more Gradle so this was a great opportunity. 15 minutes later and we‚Äôve got a build file (thanks to <a href=http://mrhaki.blogspot.co.uk/2010/10/gradle-goodness-parse-output-from-exec.html>Mr Haki</a> for the OutputStream processing):</p><noscript><pre>import org.gradle.api.tasks.Exec

defaultTasks &#39;bower&#39;

// Get the path for the locally installed binaries
task npmBin &lt;&lt; {
    new ByteArrayOutputStream().withStream { os -&gt;
        def result = exec {
            executable = &#39;npm&#39;
            args = [&#39;bin&#39;]
            standardOutput = os
        }
        ext.binPath = os.toString().trim() + &quot;/&quot;
    }
}


// Install packages from package.json
task npm(type: Exec) {
    description = &quot;Grab NodeJS dependencies (from package.json)&quot;
    commandLine = [&quot;npm&quot;, &quot;install&quot;]
    inputs.file &quot;package.json&quot;
    outputs.dir &quot;node_modules&quot;

    tasks.npmBin.execute()

}


// Install the bower components for front-end library management
task bower(dependsOn: &#39;npm&#39;, type: Exec){
    commandLine &quot;${npmBin.binPath}bower&quot;, &#39;install&#39;
}</pre></noscript><script src=https://gist.github.com/spikeheap/8558786.js></script><p>There may well be a better way of doing this, but it worked for me on OSX. There was a path-related error when we tried to run it on Windows, and if anyone can point out why that would be great.</p><p>Once the Gradle build has completed you still need to run <code>grailsw run-app</code> but 2 steps is better than 4. A brief foray into <a href=https://github.com/grails/grails-gradle-plugin>building Grails with Gradle</a> yielded spurious errors before my 15 minutes was up, but recent commits may well solve that. Grails is expected to move to Gradle for version 3, so soon we‚Äôll be able to do our entire build process through a single click.</p><hr><div class=discussion><h1>Discuss!</h1><p>Was this post useful? Why not help others find it by sharing on <a href="https://twitter.com/intent/user?screen_name=spikeheap" target=_blank><i class="fa fa-twitter"></i> twitter</a>. While you're there, get in touch and let me know what you think!</p></div><div class=post-nav><a class="hidden-xs btn btn-sm btn-default pull-left half-width-max text-overflow" href="/posts/2013-12-16-git-deletion/"><i class="fa fa-arrow-circle-left"></i> Preparing a Git repository for open-sourcification</a> <a class="visible-xs-block btn btn-default btn-block text-overflow" href="/posts/2013-12-16-git-deletion/"><i class="fa fa-fw fa-arrow-circle-left"></i> Preparing a Git repository for open-sourcification</a> <a class="btn btn-sm btn-default hidden-xs pull-right half-width-max text-overflow" href="/posts/2014-02-06-geb-doubleclick/">Testing double-click events using Geb <i class="fa fa-arrow-circle-right"></i></a> <a class="visible-xs-block btn btn-default btn-block text-overflow" href="/posts/2014-02-06-geb-doubleclick/"><i class="fa fa-fw fa-arrow-circle-right"></i> Testing double-click events using Geb</a> <span class=clearfix></span></div></div><div class="col-sm-3 border-left"><div class=bio><img src=/images/profile-400px.d912.jpg><h3>Hi, I'm Ryan</h3><p>I care about code, building great teams and the community. I run <a href=https://www.slatehorse.com>Slate Horse</a> but I'm still a full-stack developer. Previously co-organiser of <a href="http://jsoxford.com/">JSOxford</a> and <a href="http://oxrug.org/">OxRUG</a>.</p><hr><h4>Get in touch</h4><div class=contact-icons><a target=_blank href=https://twitter.com/spikeheap><i class="fa fa-2x fa-twitter-square"></i></a> <a target=_blank href=https://github.com/spikeheap><i class="fa fa-2x fa-github-square"></i></a> <a target=_blank href=http://uk.linkedin.com/in/ryanpbrooks><i class="fa fa-2x fa-linkedin-square"></i></a> <a target=_blank href=mailto:ryanbrooksis+info@gmail.com><i class="fa fa-2x fa-envelope-square"></i></a></div></div></div></div></div><footer class="container-fluid footer--bottom"><div class=container><small>&copy; Ryan Brooks. The content of this page is licensed under the Creative Commons Attribution 3.0 License.</small></div></footer><script src=/vendor/node_modules/jquery/dist/jquery.min.js></script><script src=/vendor/node_modules/bootstrap-sass/assets/javascripts/bootstrap.js></script></body></html>